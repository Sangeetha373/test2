<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RecipeRecommender - Smart Indian Edition</title>

<style>
:root { --primary: #27ae60; --veg: #2ecc71; --nonveg: #e74c3c; --bg: #f8f9fa; }
body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 20px; }
.container { max-width: 1100px; margin: auto; }
header { text-align: center; padding: 20px; }
h1 { margin: 0; color: #2c3e50; }

.search-area { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 30px; }
.controls { display: flex; gap: 10px; flex-wrap: wrap; }
input, select { padding: 15px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }
input { flex: 2; min-width: 200px; }
select { flex: 1; font-weight: bold; background: white; cursor: pointer; }
button { padding: 15px 30px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
button:hover { background: #219150; }

.results-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
.card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border-bottom: 4px solid transparent; }
.card img { width: 100%; height: 180px; object-fit: cover; }
.card-content { padding: 15px; }
.type-badge { font-size: 11px; padding: 4px 8px; border-radius: 4px; text-transform: uppercase; font-weight: bold; display: inline-block; margin-bottom: 10px; }
.veg-badge { background: #e8f5e9; color: var(--veg); }
.nonveg-badge { background: #ffebee; color: var(--nonveg); }
.loader { text-align: center; display: none; padding: 40px; font-weight: bold; }
</style>
</head>

<body>

<div class="container">
<header>
<h1>ü•ó Smart RecipeRecommender</h1>
<p>Now with Indian Veg Recipes + Smart Suggestions</p>
</header>

<div class="search-area">
<div class="controls">
<input type="text" id="userInput" placeholder="Enter ingredients (e.g. potato, chicken)">
<select id="dietType">
<option value="all">All Types</option>
<option value="veg">Veg Only</option>
<option value="nonveg">Non-Veg Only</option>
</select>
<button onclick="getLiveRecipes()">Find Recipes</button>
</div>
</div>

<div id="loader" class="loader">üîç Searching smart matches...</div>
<div id="results" class="results-grid"></div>

</div>

<script>

// ‚úÖ Indian Veg Recipes (Static Data)
const indianVegRecipes = [
{
name: "Idly",
image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/06/idli-recipe-1.jpg",
steps: ["Soak rice & urad dal 6 hrs","Grind and ferment overnight","Steam in idli mould 10 mins"]
},
{
name: "Dosa",
image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/07/dosa-recipe-1.jpg",
steps: ["Prepare dosa batter","Heat tawa","Spread batter thin","Cook both sides"]
},
{
name: "Poori",
image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/06/poori-recipe-1.jpg",
steps: ["Prepare wheat dough","Roll small circles","Deep fry until puffed"]
},
{
name: "Kuruma",
image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/04/veg-kurma-recipe-1.jpg",
steps: ["Saute spices","Add vegetables","Add coconut paste","Cook till soft"]
},
{
name: "Thakali Thoku",
image: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/05/tomato-thokku-1.jpg",
steps: ["Cook tomatoes","Add spices","Simmer till thick","Cool and store"]
}
];

// ‚úÖ Simple Similarity Checker (for wrong spellings)
function similar(a, b) {
return a.includes(b) || b.includes(a) || a.substring(0,4) === b.substring(0,4);
}

async function getLiveRecipes() {

const input = document.getElementById('userInput').value.trim().toLowerCase();
const dietType = document.getElementById('dietType').value;
const results = document.getElementById('results');
const loader = document.getElementById('loader');

if(!input) return alert("Enter ingredients!");

results.innerHTML = "";
loader.style.display = "block";

try {

// ‚úÖ Step 1: Fetch all meals (for suggestions)
const response = await fetch("https://www.themealdb.com/api/json/v1/1/search.php?s=");
const data = await response.json();
const meals = data.meals;

let foundMeals = [];

// Smart matching
meals.forEach(meal => {
const ingredients = Object.values(meal)
.filter(val => typeof val === "string" && val.toLowerCase().includes(input));

if(ingredients.length > 0 || similar(meal.strMeal.toLowerCase(), input)) {
foundMeals.push(meal);
}
});

// If nothing found ‚Üí suggest close names
if(foundMeals.length === 0) {
results.innerHTML = "<p>No exact match. Showing suggested meals:</p>";
foundMeals = meals.filter(m => similar(m.strMeal.toLowerCase(), input));
}

// Limit results
foundMeals.slice(0,10).forEach(meal => {

const nonVegCats = ['chicken','beef','pork','lamb','seafood','goat'];
const isNonVeg = nonVegCats.includes(meal.strCategory.toLowerCase());

if(dietType === "veg" && isNonVeg) return;
if(dietType === "nonveg" && !isNonVeg) return;

renderMeal(meal.strMeal, meal.strMealThumb, meal.strInstructions.split("\n"), isNonVeg);
});

// ‚úÖ Step 2: Always include Indian Veg items if Veg selected
if(dietType === "veg" || dietType === "all") {
indianVegRecipes.forEach(recipe => {
if(similar(recipe.name.toLowerCase(), input) || input === "") {
renderMeal(recipe.name, recipe.image, recipe.steps, false);
}
});
}

} catch(error) {
results.innerHTML = "<p>Error loading data.</p>";
}

loader.style.display = "none";
}

function renderMeal(name, image, steps, isNonVeg) {

const container = document.getElementById("results");
const card = document.createElement("div");
card.className = "card";
card.style.borderBottomColor = isNonVeg ? "var(--nonveg)" : "var(--veg)";

const typeLabel = isNonVeg ? "Non-Veg" : "Veg";
const typeClass = isNonVeg ? "nonveg-badge" : "veg-badge";

card.innerHTML = `
<img src="${image}" alt="${name}">
<div class="card-content">
<span class="type-badge ${typeClass}">${typeLabel}</span>
<h3>${name}</h3>
<ol>${steps.map(s => `<li>${s}</li>`).join("")}</ol>
</div>
`;

container.appendChild(card);
}

</script>

</body>
</html>
